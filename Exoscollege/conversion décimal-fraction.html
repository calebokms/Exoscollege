<!DOCTYPE html>
<head>
<meta charset="utf-8"></meta>
<title>Exoscollège</title>
<link rel="shortcut icon" href="Exosmaths.jpg">
<style>
    body{ background-color: beige;}
        input {
        width: 300px;
        height: auto;
        border-radius: 2px;
       ;
      }
      div{position: absolute; top: 100px;
     ;}
</style>
   
</script>
</head>
<BODY>
   <script>
  
   function find_rational( value, maxdenom ) {
      console.clear();
      console.log( "Looking up: " + value );
      let best = { numerator: 1, denominator: 1, error: Math.abs(value - 1) }
      if ( !maxdenom ) maxdenom = 10000;
      for ( let denominator = 1; best.error > 0 && denominator <= maxdenom; denominator++ ) {
        let numerator = Math.round( value * denominator );
        let error = Math.abs( value - numerator / denominator );
        if ( error >= best.error ) continue;
        best.numerator = numerator;
        best.denominator = denominator;
        best.error = error;
        console.log( "Intermediate result: "
                       + best.numerator + "/" + best.denominator
                       + " (" + ( best.numerator/best.denominator)
                       + " error " + best.error + " )" );
      }
      console.log( "Final result: " + JSON.stringify( best ) );
      return best;
    }
      
    function calc() {
        const value = parseFloat( $("#myInput").val() );
        if ( isNaN(value) ) {
            $( "#myResult" ).val( "NaN" );
            return;
        }
        const rational = find_rational( value, 10000 );
        $("#myResult").val( rational.numerator
                            + " / " + rational.denominator
                            + " ( Error: " + rational.error + " )" );
    }
    
    calc();</script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <div>
    <P>
    Entrer un nombre décimal:<BR/>
    <INPUT type="text" name="myInput" id="myInput" value=".3435" onkeyup="calc()"/><BR/>
    </P>
    
    <P>
    Resulatat:<BR/>
    <INPUT name="myResult" id="myResult" value=""/><BR/>
    </P>
</div>
</script>
</BODY>
